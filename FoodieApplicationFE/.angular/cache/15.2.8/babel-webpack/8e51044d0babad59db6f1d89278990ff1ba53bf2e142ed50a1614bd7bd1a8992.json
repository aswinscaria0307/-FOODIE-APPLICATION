{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../service/user.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../service/login.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/button\";\nfunction LoginComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" Email is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" Not a valid email \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" Password is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Password must be \", ctx_r3.password == null ? null : ctx_r3.password.errors == null ? null : ctx_r3.password.errors[\"minlength\"].requiredLength, \" characters long \");\n  }\n}\nexport class LoginComponent {\n  constructor(fb, userService, _sanckBar, route, loginStatus) {\n    this.fb = fb;\n    this.userService = userService;\n    this._sanckBar = _sanckBar;\n    this.route = route;\n    this.loginStatus = loginStatus;\n    this.loginForm = this.fb.group({\n      email: [\"\", [Validators.required, this.checkIfGuestEmailsAreValid]],\n      password: [\"\", [Validators.required, Validators.minLength(7)]]\n    });\n  }\n  get email() {\n    return this.loginForm.get('email');\n  }\n  get password() {\n    return this.loginForm.get('password');\n  }\n  checkIfGuestEmailsAreValid(c) {\n    if (c.value !== '') {\n      const emailString = c.value;\n      const emails = emailString.split(',').map(e => e.trim());\n      const emailRegex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n      const anyInvalidEmail = emails.every(e => e.match(emailRegex) !== null);\n      if (!anyInvalidEmail) {\n        return {\n          checkIfGuestEmailsAreValid: false\n        };\n      }\n    }\n    return null;\n  }\n  loginCheck() {\n    this.userService.login(this.loginForm.value).subscribe({\n      next: data => {\n        this.responseData = data;\n        localStorage.setItem('jwt', this.responseData.Token);\n        localStorage.setItem('email', this.responseData.email);\n        localStorage.setItem(\"role\", this.responseData.role);\n        console.log(localStorage.getItem(\"jwt\"));\n        this._sanckBar.open('Logged In successfully.....', 'success', {\n          duration: 3000,\n          panelClass: ['mat-toolbar', 'mat-primary']\n        });\n        if (this.responseData.role === \"adminRole\") {\n          this.route.navigateByUrl('/admin');\n          this.loginStatus.loginSuccess();\n          this.loginStatus.adminLoginSuccess();\n          this.loginStatus.getLoginStatus();\n          this.loginStatus.admin();\n        } else {\n          this.loginStatus.loginSuccess();\n          this.loginStatus.getLoginStatus();\n          this.route.navigateByUrl(\"\");\n        }\n      },\n      error: err => {\n        this.loginStatus.onFailure();\n        alert(\"Authorization failed, Please check the provided details again!\");\n      }\n    });\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.MatSnackBar), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.LoginService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 28,\n  vars: 6,\n  consts: [[1, \"loginPage\"], [\"id\", \"imgBx\"], [\"src\", \"../../assets/loginImg.png\", \"alt\", \"\"], [\"id\", \"formLogin\"], [\"id\", \"formBx\"], [3, \"formGroup\", \"ngSubmit\"], [\"id\", \"emailInP\"], [\"type\", \"text\", \"placeholder\", \"Enter your Email\", \"formControlName\", \"email\"], [\"id\", \"err\", 4, \"ngIf\"], [\"id\", \"passwordInp\"], [\"type\", \"password\", \"placeholder\", \"Enter your Password\", \"formControlName\", \"password\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", 3, \"disabled\"], [\"routerLink\", \"/registration\"], [\"id\", \"err\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"section\")(2, \"div\", 1);\n      i0.ɵɵelement(3, \"img\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"h2\");\n      i0.ɵɵtext(7, \"Login to Continue..!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"form\", 5);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_8_listener() {\n        return ctx.loginCheck();\n      });\n      i0.ɵɵelementStart(9, \"div\", 6)(10, \"span\");\n      i0.ɵɵtext(11, \"Email \\u00A0\\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 7);\n      i0.ɵɵtemplate(13, LoginComponent_div_13_Template, 2, 0, \"div\", 8);\n      i0.ɵɵtemplate(14, LoginComponent_div_14_Template, 2, 0, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 9)(16, \"span\");\n      i0.ɵɵtext(17, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"input\", 10);\n      i0.ɵɵtemplate(19, LoginComponent_div_19_Template, 2, 0, \"div\", 8);\n      i0.ɵɵtemplate(20, LoginComponent_div_20_Template, 2, 1, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(21, \"br\");\n      i0.ɵɵelementStart(22, \"button\", 11);\n      i0.ɵɵtext(23, \"Sign In\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(24, \"p\");\n      i0.ɵɵtext(25, \"Don't have an account?\");\n      i0.ɵɵelementStart(26, \"a\", 12);\n      i0.ɵɵtext(27, \"Sign up\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", (ctx.email == null ? null : ctx.email.errors == null ? null : ctx.email.errors[\"required\"]) && (ctx.email == null ? null : ctx.email.dirty));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.email == null ? null : ctx.email.errors == null ? null : ctx.email.errors[\"checkIfGuestEmailsAreValid\"]) === false && (ctx.email == null ? null : ctx.email.dirty));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", (ctx.password == null ? null : ctx.password.errors == null ? null : ctx.password.errors[\"required\"]) && (ctx.password == null ? null : ctx.password.dirty));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.password == null ? null : ctx.password.errors == null ? null : ctx.password.errors[\"minlength\"]);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !ctx.loginForm.valid);\n    }\n  },\n  dependencies: [i6.NgIf, i4.RouterLink, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i7.MatButton],\n  styles: [\".loginPage[_ngcontent-%COMP%]{\\r\\n    background: linear-gradient(to top,rgb(248, 133, 26),rgb(216, 217, 219));\\r\\n}\\r\\n\\r\\n#bgImg[_ngcontent-%COMP%]{\\r\\n    width: 100vw;\\r\\n    height: 100vh;\\r\\n    position: absolute;\\r\\n    z-index: -20;\\r\\n}\\r\\ninput[_ngcontent-%COMP%]{\\r\\n    border-radius:30px;\\r\\n    border: none; \\r\\n    width: 84%;\\r\\n    padding: 15px 20px;\\r\\n    outline: none;\\r\\n    margin-bottom: 10px;\\r\\n}\\r\\n#emailInP[_ngcontent-%COMP%]{\\r\\n    margin-bottom: 20px;\\r\\n}\\r\\n#err[_ngcontent-%COMP%]{\\r\\n    color: rgb(255, 78, 78);\\r\\n}\\r\\n\\r\\nform[_ngcontent-%COMP%]{\\r\\n    width: 94%;\\r\\n    margin: auto;\\r\\n    margin-bottom: 20px;\\r\\n}\\r\\nsection[_ngcontent-%COMP%]{\\r\\n    position: relative;\\r\\n    width: 100%;\\r\\n    height: 100vh;\\r\\n    display: flex;\\r\\n}\\r\\nsection[_ngcontent-%COMP%]   #imgBx[_ngcontent-%COMP%]{\\r\\n    position: relative;\\r\\n    width: 50%;\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\nsection[_ngcontent-%COMP%]   #imgBx[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    left: 0;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    object-fit: cover;\\r\\n\\r\\n}\\r\\nsection[_ngcontent-%COMP%]   #formLogin[_ngcontent-%COMP%]{\\r\\n    margin:auto;\\r\\n    width: 50%;\\r\\n    height: 100vh;\\r\\n    text-align:center;\\r\\n    align-items: center;\\r\\n    justify-content: center;\\r\\n    display: flex;\\r\\n    \\r\\n}\\r\\nform[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{\\r\\n    display: inline-block;\\r\\n    letter-spacing: 1px;\\r\\n    font-weight: 400;\\r\\n    color: white;\\r\\n    margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n#formBx[_ngcontent-%COMP%]{\\r\\n   \\r\\n   background:linear-gradient(to top,rgb(243, 167, 101)rgb(233, 212, 179));\\r\\n   padding: 4%;\\r\\n   border-radius:6%;\\r\\n   box-shadow:10px 10px 190px -50px;\\r\\n   margin: 10px;\\r\\n   width: 50%;\\r\\n}\\r\\n#formLogin[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{\\r\\n    text-align: center;\\r\\n    font-weight: 600;\\r\\n    color: white;\\r\\n    margin-bottom: 30px;\\r\\n    font-family: cursive;\\r\\n    font-size: 25px;\\r\\n}\\r\\np[_ngcontent-%COMP%]{\\r\\n    font-size: 15px;\\r\\n    color:rgb(0, 0, 0);\\r\\n}\\r\\np[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{\\r\\n    font-weight: 600;\\r\\n    color: white;\\r\\n    margin-left:5px;\\r\\n}\\r\\n\\r\\n@media (max-width:677px){\\r\\n    .loginPage[_ngcontent-%COMP%]{\\r\\n        background:rgb(250, 61, 124);\\r\\n    }\\r\\n    section[_ngcontent-%COMP%]   #imgBx[_ngcontent-%COMP%]{\\r\\n        position: absolute;\\r\\n        top: 0;\\r\\n        left: 0;\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n    }\\r\\n\\r\\n    section[_ngcontent-%COMP%]   #formLogin[_ngcontent-%COMP%]{\\r\\n    \\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        text-align:center;\\r\\n        align-items: center;\\r\\n        justify-content: center;\\r\\n        display: flex;\\r\\n        z-index: 1;\\r\\n    }\\r\\n    #formBx[_ngcontent-%COMP%]{\\r\\n        background:rgba(248, 26, 96, 0.932);\\r\\n    }\\r\\n    #err[_ngcontent-%COMP%]{\\r\\n        color: white;\\r\\n    }\\r\\n   \\r\\n}\\r\\n\\r\\n@media (max-width:427px) {\\r\\n    input[_ngcontent-%COMP%]{\\r\\n        width: 100%;\\r\\n    }\\r\\n    #formBx[_ngcontent-%COMP%]{\\r\\n        width: 80%;\\r\\n    }\\r\\n    form[_ngcontent-%COMP%]{\\r\\n        width:70%;\\r\\n    }\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0E7SUFDSSx3RUFBd0U7QUFDNUU7O0FBRUE7SUFDSSxZQUFZO0lBQ1osYUFBYTtJQUNiLGtCQUFrQjtJQUNsQixZQUFZO0FBQ2hCO0FBQ0E7SUFDSSxrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLFVBQVU7SUFDVixrQkFBa0I7SUFDbEIsYUFBYTtJQUNiLG1CQUFtQjtBQUN2QjtBQUNBO0lBQ0ksbUJBQW1CO0FBQ3ZCO0FBQ0E7SUFDSSx1QkFBdUI7QUFDM0I7O0FBRUE7SUFDSSxVQUFVO0lBQ1YsWUFBWTtJQUNaLG1CQUFtQjtBQUN2QjtBQUNBO0lBQ0ksa0JBQWtCO0lBQ2xCLFdBQVc7SUFDWCxhQUFhO0lBQ2IsYUFBYTtBQUNqQjtBQUNBO0lBQ0ksa0JBQWtCO0lBQ2xCLFVBQVU7SUFDVixZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCLE1BQU07SUFDTixPQUFPO0lBQ1AsV0FBVztJQUNYLFlBQVk7SUFDWixpQkFBaUI7O0FBRXJCO0FBQ0E7SUFDSSxXQUFXO0lBQ1gsVUFBVTtJQUNWLGFBQWE7SUFDYixpQkFBaUI7SUFDakIsbUJBQW1CO0lBQ25CLHVCQUF1QjtJQUN2QixhQUFhOztBQUVqQjtBQUNBO0lBQ0kscUJBQXFCO0lBQ3JCLG1CQUFtQjtJQUNuQixnQkFBZ0I7SUFDaEIsWUFBWTtJQUNaLGtCQUFrQjtBQUN0Qjs7QUFFQTtHQUNHLHdCQUF3QjtHQUN4Qix1RUFBdUU7R0FDdkUsV0FBVztHQUNYLGdCQUFnQjtHQUNoQixnQ0FBZ0M7R0FDaEMsWUFBWTtHQUNaLFVBQVU7QUFDYjtBQUNBO0lBQ0ksa0JBQWtCO0lBQ2xCLGdCQUFnQjtJQUNoQixZQUFZO0lBQ1osbUJBQW1CO0lBQ25CLG9CQUFvQjtJQUNwQixlQUFlO0FBQ25CO0FBQ0E7SUFDSSxlQUFlO0lBQ2Ysa0JBQWtCO0FBQ3RCO0FBQ0E7SUFDSSxnQkFBZ0I7SUFDaEIsWUFBWTtJQUNaLGVBQWU7QUFDbkI7O0FBRUE7SUFDSTtRQUNJLDRCQUE0QjtJQUNoQztJQUNBO1FBQ0ksa0JBQWtCO1FBQ2xCLE1BQU07UUFDTixPQUFPO1FBQ1AsV0FBVztRQUNYLFlBQVk7SUFDaEI7O0lBRUE7O1FBRUksV0FBVztRQUNYLFlBQVk7UUFDWixpQkFBaUI7UUFDakIsbUJBQW1CO1FBQ25CLHVCQUF1QjtRQUN2QixhQUFhO1FBQ2IsVUFBVTtJQUNkO0lBQ0E7UUFDSSxtQ0FBbUM7SUFDdkM7SUFDQTtRQUNJLFlBQVk7SUFDaEI7O0FBRUo7O0FBRUE7SUFDSTtRQUNJLFdBQVc7SUFDZjtJQUNBO1FBQ0ksVUFBVTtJQUNkO0lBQ0E7UUFDSSxTQUFTO0lBQ2I7QUFDSiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4ubG9naW5QYWdle1xyXG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHRvcCxyZ2IoMjQ4LCAxMzMsIDI2KSxyZ2IoMjE2LCAyMTcsIDIxOSkpO1xyXG59XHJcblxyXG4jYmdJbWd7XHJcbiAgICB3aWR0aDogMTAwdnc7XHJcbiAgICBoZWlnaHQ6IDEwMHZoO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgei1pbmRleDogLTIwO1xyXG59XHJcbmlucHV0e1xyXG4gICAgYm9yZGVyLXJhZGl1czozMHB4O1xyXG4gICAgYm9yZGVyOiBub25lOyBcclxuICAgIHdpZHRoOiA4NCU7XHJcbiAgICBwYWRkaW5nOiAxNXB4IDIwcHg7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxufVxyXG4jZW1haWxJblB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcbiNlcnJ7XHJcbiAgICBjb2xvcjogcmdiKDI1NSwgNzgsIDc4KTtcclxufVxyXG5cclxuZm9ybXtcclxuICAgIHdpZHRoOiA5NCU7XHJcbiAgICBtYXJnaW46IGF1dG87XHJcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcbnNlY3Rpb257XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGhlaWdodDogMTAwdmg7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG59XHJcbnNlY3Rpb24gI2ltZ0J4e1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgd2lkdGg6IDUwJTtcclxuICAgIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuc2VjdGlvbiAjaW1nQnggaW1ne1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiAwO1xyXG4gICAgbGVmdDogMDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgb2JqZWN0LWZpdDogY292ZXI7XHJcblxyXG59XHJcbnNlY3Rpb24gI2Zvcm1Mb2dpbntcclxuICAgIG1hcmdpbjphdXRvO1xyXG4gICAgd2lkdGg6IDUwJTtcclxuICAgIGhlaWdodDogMTAwdmg7XHJcbiAgICB0ZXh0LWFsaWduOmNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBcclxufVxyXG5mb3JtIHNwYW57XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBsZXR0ZXItc3BhY2luZzogMXB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIG1hcmdpbi1ib3R0b206IDVweDtcclxufVxyXG5cclxuI2Zvcm1CeHtcclxuICAgLyogYmFja2dyb3VuZDojNzM3Mzc0OyAqL1xyXG4gICBiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCh0byB0b3AscmdiKDI0MywgMTY3LCAxMDEpcmdiKDIzMywgMjEyLCAxNzkpKTtcclxuICAgcGFkZGluZzogNCU7XHJcbiAgIGJvcmRlci1yYWRpdXM6NiU7XHJcbiAgIGJveC1zaGFkb3c6MTBweCAxMHB4IDE5MHB4IC01MHB4O1xyXG4gICBtYXJnaW46IDEwcHg7XHJcbiAgIHdpZHRoOiA1MCU7XHJcbn1cclxuI2Zvcm1Mb2dpbiBoMntcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xyXG4gICAgZm9udC1mYW1pbHk6IGN1cnNpdmU7XHJcbiAgICBmb250LXNpemU6IDI1cHg7XHJcbn1cclxucHtcclxuICAgIGZvbnQtc2l6ZTogMTVweDtcclxuICAgIGNvbG9yOnJnYigwLCAwLCAwKTtcclxufVxyXG5wIGF7XHJcbiAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgbWFyZ2luLWxlZnQ6NXB4O1xyXG59XHJcblxyXG5AbWVkaWEgKG1heC13aWR0aDo2NzdweCl7XHJcbiAgICAubG9naW5QYWdle1xyXG4gICAgICAgIGJhY2tncm91bmQ6cmdiKDI1MCwgNjEsIDEyNCk7XHJcbiAgICB9XHJcbiAgICBzZWN0aW9uICNpbWdCeHtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgfVxyXG5cclxuICAgIHNlY3Rpb24gI2Zvcm1Mb2dpbntcclxuICAgIFxyXG4gICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjtcclxuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgei1pbmRleDogMTtcclxuICAgIH1cclxuICAgICNmb3JtQnh7XHJcbiAgICAgICAgYmFja2dyb3VuZDpyZ2JhKDI0OCwgMjYsIDk2LCAwLjkzMik7XHJcbiAgICB9XHJcbiAgICAjZXJye1xyXG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIH1cclxuICAgXHJcbn1cclxuXHJcbkBtZWRpYSAobWF4LXdpZHRoOjQyN3B4KSB7XHJcbiAgICBpbnB1dHtcclxuICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgIH1cclxuICAgICNmb3JtQnh7XHJcbiAgICAgICAgd2lkdGg6IDgwJTtcclxuICAgIH1cclxuICAgIGZvcm17XHJcbiAgICAgICAgd2lkdGg6NzAlO1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","i0","LoginComponent","constructor","fb","userService","_sanckBar","route","loginStatus","group","email","required","checkIfGuestEmailsAreValid","password","minLength","loginForm","get","c","value","emailString","emails","split","map","e","trim","emailRegex","anyInvalidEmail","every","match","loginCheck","login","subscribe","next","data","responseData","localStorage","setItem","Token","role","console","log","getItem","open","duration","panelClass","navigateByUrl","loginSuccess","adminLoginSuccess","getLoginStatus","admin","error","err","onFailure","alert","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["F:\\CAPSTONE PROJECT- FOODIE APP\\FoodieApplicationFE\\FoodieApplication\\src\\app\\login\\login.component.ts","F:\\CAPSTONE PROJECT- FOODIE APP\\FoodieApplicationFE\\FoodieApplication\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { AbstractControl, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { UserService } from '../service/user.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { Router } from '@angular/router';\nimport { LoginService } from '../service/login.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n\n  responseData:any;\n\n  constructor(private fb:FormBuilder,private userService:UserService,private _sanckBar:MatSnackBar,private route:Router,private loginStatus:LoginService){}\n\n  loginForm = this.fb.group({\n    email:[\"\",[Validators.required,this.checkIfGuestEmailsAreValid]],\n    password:[\"\",[Validators.required,Validators.minLength(7)]]\n  })\n\n  get email(){\n    return this.loginForm.get('email');\n  }\n\n  get password(){\n    return this.loginForm.get('password')\n  }\n\n  checkIfGuestEmailsAreValid(c: AbstractControl) {\n \n    if (c.value !== '') {\n      const emailString = c.value;\n      const emails = emailString.split(',').map((e: string) => e.trim());\n      const emailRegex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n      const anyInvalidEmail = emails.every((e: string) => e.match(emailRegex) !== null);\n      if (!anyInvalidEmail) {\n        return { checkIfGuestEmailsAreValid: false }\n      }\n    }\n    return null;\n  }\n\n  loginCheck(){    \n      this.userService.login(this.loginForm.value).subscribe({\n        next:data=>{\n          this.responseData=data; \n          localStorage.setItem('jwt',this.responseData.Token);\n          localStorage.setItem('email',this.responseData.email);\n          localStorage.setItem(\"role\",this.responseData.role);\n          console.log(localStorage.getItem(\"jwt\"));\n          this._sanckBar.open('Logged In successfully.....', 'success', {\n            duration: 3000,\n            panelClass: ['mat-toolbar', 'mat-primary']\n          });\n          if(this.responseData.role===\"adminRole\"){\n            this.route.navigateByUrl('/admin');\n            this.loginStatus.loginSuccess();\n            this.loginStatus.adminLoginSuccess();\n            this.loginStatus.getLoginStatus();\n            this.loginStatus.admin();\n          }else{\n          this.loginStatus.loginSuccess();\n          this.loginStatus.getLoginStatus();\n          this.route.navigateByUrl(\"\");\n          }\n        },error:(err)=>{\n           this.loginStatus.onFailure()\n          alert(\"Authorization failed, Please check the provided details again!\")\n        }\n      })\n  }\n}\n","<div class=\"loginPage\">\n    <section>\n        <div id=\"imgBx\">\n         <img src=\"../../assets/loginImg.png\" alt=\"\">\n        </div>\n        <div id=\"formLogin\">\n            <div id=\"formBx\">\n            <h2>Login to Continue..!</h2>\n                <form (ngSubmit)=\"loginCheck()\" [formGroup]=\"loginForm\">\n\n                    <div id=\"emailInP\">\n                        <span>Email &nbsp;&nbsp;</span>\n                        <input type=\"text\" placeholder=\"Enter your Email\" formControlName=\"email\">\n                        <div id=\"err\" *ngIf=\"email?.errors?.['required'] && email?.dirty\">\n                            Email is required\n                        </div>\n                        <div id=\"err\" *ngIf=\"email?.errors?.['checkIfGuestEmailsAreValid']===false && email?.dirty\">\n                           Not a valid email \n                        </div>\n                    </div>\n\n                    <div id=\"passwordInp\">\n                        <span>Password</span>\n                        <input type=\"password\" placeholder=\"Enter your Password\" formControlName=\"password\">\n                        <div id=\"err\" *ngIf=\"password?.errors?.['required'] && password?.dirty\">\n                            Password is required\n                        </div>\n                        <div id=\"err\" *ngIf=\"password?.errors?.['minlength']\">\n                            Password must be {{password?.errors?.['minlength'].requiredLength}} characters long\n                        </div>\n                    </div>\n\n                    <br>\n                    <button mat-raised-button type=\"submit\" [disabled]=\"!loginForm.valid\">Sign In</button>\n\n                </form>\n\n              <p>Don't have an account?<a routerLink=\"/registration\">Sign up</a></p>\n            </div>\n        </div>\n    </section>\n</div>\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}