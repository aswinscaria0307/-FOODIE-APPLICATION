{"ast":null,"code":"import { AddressDialogComponent } from '../address-dialog/address-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/foodie.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"../service/user.service\";\nimport * as i5 from \"../service/login.service\";\nimport * as i6 from \"@angular/common\";\nfunction CartComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 12)(2, \"div\", 13)(3, \"div\", 14);\n    i0.ɵɵelement(4, \"img\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"a\", 16);\n    i0.ɵɵelement(6, \"div\", 17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 18)(8, \"p\")(9, \"strong\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"p\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 19)(16, \"div\", 20)(17, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_8_Template_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.remove(item_r2.itemName));\n    });\n    i0.ɵɵtext(18, \" - \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 22);\n    i0.ɵɵelement(20, \"input\", 23);\n    i0.ɵɵelementStart(21, \"label\", 24);\n    i0.ɵɵtext(22, \"Quantity\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_8_Template_button_click_23_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.add(item_r2.itemName));\n    });\n    i0.ɵɵtext(24, \" + \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"p\", 25)(26, \"strong\");\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(28, \"hr\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"src\", item_r2.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(item_r2.itemName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price : \", item_r2.itemPrice, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Rating : \", item_r2.itemRating, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵpropertyInterpolate(\"value\", item_r2.count);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r0.calculateTotalPrice(item_r2.itemName));\n  }\n}\nfunction CartComponent_div_22_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 34)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r6.address == null ? null : ctx_r6.address.houseNo, \",\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r6.address == null ? null : ctx_r6.address.landmark, \",\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r6.address == null ? null : ctx_r6.address.street, \",\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r6.address == null ? null : ctx_r6.address.city, \",\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.address == null ? null : ctx_r6.address.pin);\n  }\n}\nfunction CartComponent_div_22_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 34)(1, \"span\");\n    i0.ɵɵtext(2, \"A\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CartComponent_div_22_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_22_button_9_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.changeAddress());\n    });\n    i0.ɵɵtext(1, \" Change Address \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CartComponent_div_22_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_22_button_10_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.changeAddress());\n    });\n    i0.ɵɵtext(1, \" Add Address \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CartComponent_div_22_button_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_22_button_34_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.goToPayment());\n    });\n    i0.ɵɵtext(1, \" Go to Payment \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CartComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"div\", 4)(2, \"div\", 5)(3, \"h5\", 6);\n    i0.ɵɵtext(4, \"Shipping Address\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 8)(6, \"ul\", 28);\n    i0.ɵɵtemplate(7, CartComponent_div_22_li_7_Template, 11, 5, \"li\", 29);\n    i0.ɵɵtemplate(8, CartComponent_div_22_li_8_Template, 3, 0, \"li\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, CartComponent_div_22_button_9_Template, 2, 0, \"button\", 30);\n    i0.ɵɵtemplate(10, CartComponent_div_22_button_10_Template, 2, 0, \"button\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 5)(12, \"h5\", 6);\n    i0.ɵɵtext(13, \"Summary\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 8)(15, \"ul\", 28)(16, \"li\", 31);\n    i0.ɵɵtext(17, \" Products \");\n    i0.ɵɵelementStart(18, \"span\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"li\", 32);\n    i0.ɵɵtext(21, \" Shipping \");\n    i0.ɵɵelementStart(22, \"span\");\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"li\", 33)(25, \"div\")(26, \"strong\");\n    i0.ɵɵtext(27, \"Total amount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"strong\")(29, \"p\", 6);\n    i0.ɵɵtext(30, \"(including Shipping)\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(31, \"span\")(32, \"strong\");\n    i0.ɵɵtext(33);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(34, CartComponent_div_22_button_34_Template, 2, 0, \"button\", 30);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.address != null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.address == null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.address != null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.address == null);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(ctx_r1.total);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.shipping);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(ctx_r1.subtotal);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.address != null);\n  }\n}\nexport class CartComponent {\n  constructor(foodie, route, dialog, user, login) {\n    this.foodie = foodie;\n    this.route = route;\n    this.dialog = dialog;\n    this.user = user;\n    this.login = login;\n    this.items = [];\n    this.theItem = null;\n    this.total = 0;\n    this.subtotal = 0;\n    this.shipping = 0;\n    this.goToPayment = () => {\n      let data = {\n        orderAmount: this.subtotal,\n        orderInfo: \"order_request\"\n      };\n      this.foodie.createPaymentOrder(data).subscribe(response => {\n        console.log(response);\n        if (response.status == 'created') {\n          //open payment form\n          var options = {\n            key: 'rzp_test_pVaEM3TS2Oh7JN',\n            amount: response.amount,\n            currency: 'INR',\n            name: 'Foodie',\n            description: 'order total amount',\n            image: 'data:image/png;base64,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',\n            order_id: response.id,\n            handler: response => {\n              console.log(response.razorpay_payment_id);\n              console.log(response.razorpay_order_id);\n              console.log(response.razorpay_signature);\n              this.paymentSuccess(); // Call the paymentSuccess() function\n            },\n\n            prefill: {\n              name: \"\",\n              email: \"\",\n              contact: \"\"\n            },\n            notes: {\n              address: \"Razorpay Corporate Office\"\n            },\n            theme: {\n              color: \"#3399cc\"\n            }\n          };\n          var rzp = new Razorpay(options);\n          rzp.on('payment.failed', function (response) {\n            alert(response.error.code);\n            alert(response.error.description);\n            alert(response.error.source);\n            alert(response.error.step);\n            alert(response.error.reason);\n            alert(response.error.metadata.order_id);\n            alert(response.error.metadata.payment_id);\n          });\n          rzp.open();\n        }\n      }, failure => {\n        console.log(failure);\n        alert(\"Something went wrong...\");\n      });\n    };\n  }\n  ngOnInit() {\n    this.user.getAddress().subscribe(response => {\n      this.address = response;\n    });\n    this.user.addressChanged.subscribe(res => {\n      this.ngOnInit();\n    });\n    this.foodie.getItems(\"incart\", localStorage.getItem('email')).subscribe(response => {\n      console.log(response);\n      this.items = response;\n      this.totalPrice();\n    });\n  }\n  remove(itemName) {\n    if (itemName != null) {\n      let remove = this.items.find(item => item.itemName === itemName);\n      console.log(remove);\n      if (remove != undefined) {\n        this.foodie.removeItem(localStorage.getItem('email'), remove).subscribe(response => {\n          this.ngOnInit();\n          this.totalPrice();\n        });\n      }\n    }\n  }\n  add(itemName) {\n    if (itemName != null) {\n      let add = this.items.find(item => item.itemName === itemName);\n      console.log(add);\n      if (add != undefined) {\n        this.foodie.addItem(localStorage.getItem('email'), add).subscribe(responce => {\n          this.ngOnInit();\n          this.totalPrice();\n        });\n      }\n    }\n  }\n  totalPrice() {\n    this.total = this.items.map(item => {\n      if (item.itemPrice && item.count) {\n        return item.itemPrice * item.count;\n      }\n      return 0;\n    }).reduce((acc, val) => acc + val, 0);\n    this.subtotal = this.total;\n    if (this.total > 100) {\n      this.shipping = 0;\n    }\n    if (this.total < 100) {\n      this.shipping = 50;\n    }\n    if (this.total < 100) {\n      this.subtotal = this.total + this.shipping;\n    }\n  }\n  calculateTotalPrice(itemname) {\n    let itemTotal = 0;\n    this.items.map(item => {\n      if (item.itemName == itemname && item.count && item.itemPrice) {\n        itemTotal = item.count * item.itemPrice;\n      }\n    });\n    return itemTotal;\n  }\n  paymentSuccess() {\n    let body = \"\";\n    for (const item of this.items) {\n      body += `${item.itemName} ( ${item.count} items on the way), `;\n    }\n    body = body.slice(0, -2);\n    this.foodie.sendMail(localStorage.getItem(\"email\"), \"Order Placed Successfully\", body).subscribe(() => {\n      console.log(\"Email sent successfully\");\n    }, error => {\n      console.error(\"Error sending email:\", error);\n    });\n    this.foodie.sendSms(\"+917034125232\", body) //localStorage.getItem(\"number\")\n    .subscribe(() => {\n      console.log(\"Sms sent successfully\");\n    }, error => {\n      console.error(\"Error sending Sms:\", error);\n    });\n  }\n  changeAddress() {\n    const dialogRef = this.dialog.open(AddressDialogComponent, {\n      width: '700px'\n    });\n  }\n}\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.FoodieService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i5.LoginService));\n};\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-cart\"]],\n  decls: 23,\n  vars: 3,\n  consts: [[1, \"gradient-custom\"], [1, \"container\", \"py-5\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"my-4\"], [1, \"col-md-8\"], [1, \"card\", \"mb-4\"], [1, \"card-header\", \"py-3\"], [1, \"mb-0\"], [\"class\", \"card-body\", 4, \"ngFor\", \"ngForOf\"], [1, \"card-body\"], [1, \"card\", \"mb-4\", \"mb-lg-0\"], [\"width\", \"45px\", \"src\", \"https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/visa.svg\", \"alt\", \"Visa\", 1, \"me-2\"], [\"class\", \"col-md-4\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-lg-3\", \"col-md-12\", \"mb-4\", \"mb-lg-0\"], [\"data-mdb-ripple-color\", \"light\", 1, \"bg-image\", \"hover-overlay\", \"hover-zoom\", \"ripple\", \"rounded\"], [\"alt\", \"item.name\", 1, \"w-100\", \"rounded\", 3, \"src\"], [\"href\", \"#!\"], [1, \"mask\", 2, \"background-color\", \"rgba(251, 251, 251, 0.2)\"], [1, \"col-lg-5\", \"col-md-6\", \"mb-4\", \"mb-lg-0\"], [1, \"col-lg-4\", \"col-md-6\", \"mb-4\", \"mb-lg-0\"], [1, \"d-flex\", \"mb-4\", 2, \"max-width\", \"300px\"], [1, \"btn\", \"btn-primary\", 2, \"height\", \"39px\", 3, \"click\"], [1, \"form-outline\"], [\"name\", \"quantity\", \"disabled\", \"true\", 1, \"form-control\", \"text-center\", 2, \"width\", \"60px\", 3, \"value\"], [\"for\", \"form1\", 1, \"form-label\"], [1, \"text-start\", \"text-md-center\"], [1, \"my-4\"], [1, \"col-md-4\"], [1, \"list-group\", \"list-group-flush\"], [\"class\", \"list-group-item d-flex align-items-center px-0\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn btn-primary btn-lg btn-block\", 3, \"click\", 4, \"ngIf\"], [1, \"list-group-item\", \"d-flex\", \"justify-content-between\", \"align-items-center\", \"border-0\", \"px-0\", \"pb-0\"], [1, \"list-group-item\", \"d-flex\", \"justify-content-between\", \"align-items-center\", \"px-0\"], [1, \"list-group-item\", \"d-flex\", \"justify-content-between\", \"align-items-center\", \"border-0\", \"px-0\", \"mb-3\"], [1, \"list-group-item\", \"d-flex\", \"align-items-center\", \"px-0\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-lg\", \"btn-block\", 3, \"click\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"h2\", 6);\n      i0.ɵɵtext(7);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(8, CartComponent_div_8_Template, 29, 6, \"div\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 4)(10, \"div\", 8)(11, \"p\")(12, \"strong\");\n      i0.ɵɵtext(13, \"Expected delivery\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"p\", 6);\n      i0.ɵɵtext(15, \"12.10.2020 - 14.10.2020\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"div\", 9)(17, \"div\", 8)(18, \"p\")(19, \"strong\");\n      i0.ɵɵtext(20, \"We accept\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(21, \"img\", 10);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(22, CartComponent_div_22_Template, 35, 8, \"div\", 11);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\"Cart - \", ctx.items.length, \" items\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.items);\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"ngIf\", ctx.subtotal > 0);\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf],\n  styles: [\".gradient-custom[_ngcontent-%COMP%] {\\r\\n    background: linear-gradient(to right, #343232, rgb(255, 255, 255));\\r\\n    height: 100%;\\r\\n    \\r\\n    }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2FydC9jYXJ0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxrRUFBa0U7SUFDbEUsWUFBWTtJQUNaLGdJQUFnSTtJQUNoSSIsInNvdXJjZXNDb250ZW50IjpbIi5ncmFkaWVudC1jdXN0b20ge1xyXG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjMzQzMjMyLCByZ2IoMjU1LCAyNTUsIDI1NSkpO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgLyogYmFja2dyb3VuZC1pbWFnZTogaW1hZ2Utc2V0KFwiaHR0cHM6Ly9idXJzdC5zaG9waWZ5Y2RuLmNvbS9waG90b3MvZ2FtZXMtYW5kLXBpenphLmpwZz93aWR0aD0zNzMmZm9ybWF0PXBqcGcmZXhpZj0xJmlwdGM9MVwiKTsgKi9cclxuICAgIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["AddressDialogComponent","i0","CartComponent","constructor","foodie","route","dialog","user","login","data","orderAmount","subtotal","orderInfo","createPaymentOrder","subscribe","response","console","log","status","options","key","amount","currency","name","description","image","order_id","id","handler","razorpay_payment_id","razorpay_order_id","razorpay_signature","paymentSuccess","prefill","email","contact","notes","address","theme","color","rzp","Razorpay","on","alert","error","code","source","step","reason","metadata","payment_id","open","failure","ngOnInit","getAddress","addressChanged","res","getItems","localStorage","getItem","items","totalPrice","remove","itemName","find","item","undefined","removeItem","add","addItem","responce","total","map","itemPrice","count","reduce","acc","val","shipping","calculateTotalPrice","itemname","itemTotal","body","slice","sendMail","sendSms","changeAddress","dialogRef","width","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["F:\\CAPSTONE PROJECT- FOODIE APP\\FoodieApplicationFE\\FoodieApplication\\src\\app\\cart\\cart.component.ts","F:\\CAPSTONE PROJECT- FOODIE APP\\FoodieApplicationFE\\FoodieApplication\\src\\app\\cart\\cart.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Item } from '../model/item';\nimport { FoodieService } from '../service/foodie.service';\nimport { RazorpayResponse } from '../model/razorPay';\nimport { PaymentOrder } from '../model/paymentOrder';\nimport { Router } from '@angular/router';\nimport { Address } from '../model/address';\nimport { MatDialog } from '@angular/material/dialog';\nimport { AddressDialogComponent } from '../address-dialog/address-dialog.component';\nimport { UserService } from '../service/user.service';\nimport { LoginService } from '../service/login.service';\ndeclare var Razorpay:any;\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent implements OnInit{\n  items:Item[]=[];\n  theItem:Item|null=null;\n   total:number=0;\n   subtotal:number=0;\n   shipping:number=0;\n   address:Address | undefined;\n\nconstructor(private foodie:FoodieService,private route:Router,private dialog: MatDialog,private user:UserService,private login:LoginService){\n}\nngOnInit(): void {\n  this.user.getAddress().subscribe((response:Address)=>{\n    this.address=response;\n  });\n  this.user.addressChanged.subscribe((res)=>{\n    this.ngOnInit();\n  })\n  this.foodie.getItems(\"incart\",localStorage.getItem('email')).subscribe(response=>{\n    console.log(response);\n    this.items=response; \n    this.totalPrice();     \n  });\n}\nremove(itemName?:string){\n  if(itemName!=null){\n    let remove:Item |undefined=this.items.find(item => item.itemName === itemName)\n    console.log(remove);\n    if(remove!=undefined){\n    this.foodie.removeItem(localStorage.getItem('email'),remove).subscribe(response=>{\n      this.ngOnInit();\n      this.totalPrice();\n          });\n    }\n  }\n} \n \nadd(itemName?:string){\n  if(itemName!=null){\n    let add:Item |undefined=this.items.find(item => item.itemName === itemName)\n    console.log(add);\n    if(add!=undefined){\n    this.foodie.addItem(localStorage.getItem('email'),add).subscribe(responce=>{\n      this.ngOnInit();\n      this.totalPrice();\n    })\n    }\n  }\n}\n\ntotalPrice(){\n  this.total = this.items.map(item => {\n    if (item.itemPrice&&item.count) {\n      return item.itemPrice*item.count;\n    }\n    return 0;\n  })\n  .reduce((acc, val) => acc + val, 0);\n  this.subtotal=this.total;\n  if(this.total>100){\n    this.shipping=0;    \n  }\n  if(this.total<100){\n    this.shipping=50;    \n  }\n  if(this.total<100){\n    this.subtotal=this.total+this.shipping;\n  }\n  \n  }\n\n  calculateTotalPrice(itemname: string | undefined): number {\n    let itemTotal = 0;\n    this.items.map((item) => {\n      if (item.itemName == itemname && item.count && item.itemPrice) {\n        itemTotal = item.count * item.itemPrice;\n      }\n    });\n    return itemTotal;\n  }\n   goToPayment =()=>{\n    let data:PaymentOrder={orderAmount:this.subtotal,orderInfo:\"order_request\"};\n    this.foodie.createPaymentOrder(data).subscribe((response:any)=>{\n      console.log(response); \n      if(response.status=='created'){\n        //open payment form\n        var options={\n          key:'rzp_test_pVaEM3TS2Oh7JN',\n          amount:response.amount,\n          currency:'INR',\n          name:'Foodie',\n          description:'order total amount',\n          image:'data:image/png;base64,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',\n          order_id:response.id,\n          handler: (response: RazorpayResponse) => {\n            console.log(response.razorpay_payment_id);\n            console.log(response.razorpay_order_id);\n            console.log(response.razorpay_signature);\n            this.paymentSuccess(); // Call the paymentSuccess() function\n          },\n          prefill: {\n            name: \"\",\n            email: \"\",\n            contact: \"\"\n              },\n          notes: {\n            address: \"Razorpay Corporate Office\"\n                \n                },\n          theme: {\n            color: \"#3399cc\"\n                }              \n        };\n        var rzp = new Razorpay(options) as any;\nrzp.on('payment.failed', function (response:any){\nalert(response.error.code);\nalert(response.error.description);\nalert(response.error.source);\nalert(response.error.step);\nalert(response.error.reason);\nalert(response.error.metadata.order_id);\nalert(response.error.metadata.payment_id);\n \n});\nrzp.open();\n      }\n    },failure=>{\n      console.log(failure);\n      alert(\"Something went wrong...\")\n    })\n  }\n\n  paymentSuccess() {\n          let body=\"\";\n          for (const item of this.items) {\n            body += `${item.itemName} ( ${item.count} items on the way), `;\n            }\n            body = body.slice(0, -2);\n\n    this.foodie.sendMail(localStorage.getItem(\"email\"), \"Order Placed Successfully\",body )\n      .subscribe(() => {\n        console.log(\"Email sent successfully\");\n      }, (error) => {\n        console.error(\"Error sending email:\", error);\n      });\n      this.foodie.sendSms(\"+917034125232\", body )//localStorage.getItem(\"number\")\n      .subscribe(() => {\n        console.log(\"Sms sent successfully\");\n      }, (error) => {\n        console.error(\"Error sending Sms:\", error);\n      });\n  }\n\n  changeAddress(){\n      const dialogRef = this.dialog.open(AddressDialogComponent, {\n        width: '700px',\n      });\n  }\n  \n}\n\n","<section class=\"gradient-custom\">\n    <div class=\"container py-5\">\n    <div class=\"row d-flex justify-content-center my-4\">\n        <div class=\"col-md-8\">\n            <div class=\"card mb-4\">\n            <div class=\"card-header py-3\">\n                <h2 class=\"mb-0\">Cart - {{items.length}} items</h2>\n            </div>\n            <!-- Single item -->\n            <div class=\"card-body\" *ngFor=\"let item of items\">\n                <div class=\"row\">\n                        <div class=\"col-lg-3 col-md-12 mb-4 mb-lg-0\">\n                            <div class=\"bg-image hover-overlay hover-zoom ripple rounded\" data-mdb-ripple-color=\"light\">\n                                <img src={{item.imageUrl}} class=\"w-100 rounded\" alt=\"item.name\">\n                            </div>\n                            <a  href=\"#!\">\n                                <div class=\"mask\" style=\"background-color: rgba(251, 251, 251, 0.2)\"></div>\n                              </a>\n                        </div>  \n                        <div class=\"col-lg-5 col-md-6 mb-4 mb-lg-0\">\n                            <p><strong>{{item.itemName}}</strong></p>\n                            <p>Price  : {{item.itemPrice}}</p>\n                            <p>Rating  : {{item.itemRating}}</p>\n                        </div>  \n                        <div class=\"col-lg-4 col-md-6 mb-4 mb-lg-0\">\n                            <div class=\"d-flex mb-4\" style=\"max-width: 300px\">\n                            <button class=\"btn btn-primary\" style=\"height: 39px;\"\n                            (click)=\"remove(item.itemName)\">\n                            -\n                          </button>\n                          <div class=\"form-outline \">\n                            <input name=\"quantity\" value={{item.count}} class=\"form-control text-center\" style=\"width: 60px;\" disabled=\"true\"/>\n                            <label class=\"form-label\" for=\"form1\">Quantity</label>\n                          </div>\n                          <button class=\"btn btn-primary\" style=\"height: 39px;\"\n                          (click)=\"add(item.itemName)\">\n                          +\n                          <!-- <i class=\"fas fa-plus\"></i> -->\n                        </button>\n                         </div>\n                         <p class=\"text-start text-md-center\">\n                            <strong>{{calculateTotalPrice(item.itemName)}}</strong>\n                        </p>\n                        </div>  \n                </div>\n                <hr class=\"my-4\" />\n            </div>\n            </div>\n            <div class=\"card mb-4\">\n                <div class=\"card-body\">\n                  <p><strong>Expected delivery</strong></p>\n                  <p class=\"mb-0\">12.10.2020 - 14.10.2020</p>\n                </div>\n              </div>\n              <div class=\"card mb-4 mb-lg-0\">\n                <div class=\"card-body\">\n                  <p><strong>We accept</strong></p>\n                  <img class=\"me-2\" width=\"45px\"\n                    src=\"https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/visa.svg\"\n                    alt=\"Visa\" />\n                </div>\n              </div>\n        </div>\n        \n        <div class=\"col-md-4\" *ngIf=\"subtotal>0\">\n            <div class=\"card mb-4\">\n              <!--  -->\n              <div class=\"card-header py-3\">\n                <h5 class=\"mb-0\">Shipping Address</h5>\n              </div>\n              <div class=\"card-body\">\n                <ul class=\"list-group list-group-flush\" >\n                <li *ngIf=\"address!=null\" class=\"list-group-item d-flex align-items-center px-0\">\n                    <span>{{address?.houseNo}},</span>\n                    <span>{{address?.landmark}},</span>\n                    <span>{{address?.street}},</span>\n                    <span>{{address?.city}},</span>\n                    <span>{{address?.pin}}</span>\n                  </li>\n                  <li *ngIf=\"address==null\" class=\"list-group-item d-flex align-items-center px-0\">\n                    <span>A</span>\n                  </li>\n                </ul>\n                <button *ngIf=\"address!=null\" type=\"button\" class=\"btn btn-primary btn-lg btn-block\" (click)=\"changeAddress()\">\n                    Change Address\n                  </button>\n                  <button *ngIf=\"address==null\" type=\"button\" class=\"btn btn-primary btn-lg btn-block\" (click)=\"changeAddress()\">\n                    Add Address\n                  </button>\n              </div>\n              <!--  -->\n                <div class=\"card-header py-3\">\n                    <h5 class=\"mb-0\">Summary</h5>\n                  </div>\n                  <div class=\"card-body\">\n                    <ul class=\"list-group list-group-flush\">\n                        <li class=\"list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0\">\n                        Products\n                      <span>{{total}}</span>\n                    </li>\n                    <li class=\"list-group-item d-flex justify-content-between align-items-center px-0\">\n                        Shipping\n                        <span>{{shipping}}</span>\n                      </li>\n                      <li\n                      class=\"list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3\">\n                      <div>\n                        <strong>Total amount</strong>\n                        <strong>\n                          <p class=\"mb-0\">(including Shipping)</p>\n                        </strong>\n                      </div>\n                      <span><strong>{{subtotal}}</strong></span>\n                    </li>\n                    </ul>\n                    <button *ngIf=\"address!=null\" (click)=\"goToPayment()\" type=\"button\" class=\"btn btn-primary btn-lg btn-block\">\n                        Go to Payment\n                      </button>\n                  </div>\n            </div>\n        </div>\n    </div>\n    </div>\n    </section>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}