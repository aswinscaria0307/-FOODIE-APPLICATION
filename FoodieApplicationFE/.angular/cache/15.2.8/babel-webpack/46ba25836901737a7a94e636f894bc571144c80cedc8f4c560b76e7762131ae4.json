{"ast":null,"code":"function hideMenu() {\n  document.getElementById(\"check\").checked = false;\n}\nexport class HeaderComponent {\n  constructor(userService, sanitizer, logSer, router, _sanckBar, foodie) {\n    this.userService = userService;\n    this.sanitizer = sanitizer;\n    this.logSer = logSer;\n    this.router = router;\n    this._sanckBar = _sanckBar;\n    this.foodie = foodie;\n    this.imageSrc = '';\n    this.adminLoggedIn = false;\n    this.userName = \"\";\n    this.isVisible = false;\n    this.search = false;\n    this.cartCount = 0;\n  }\n  ngOnInit() {\n    this.status = \"login\";\n    this.logSer.userLoggedIn.subscribe(email => {\n      if (email == true) {\n        this.userService.getUserName().subscribe(data => {\n          this.userName = data.name;\n        });\n        this.userService.getProfileImg().subscribe(data => {\n          if (data && data.imageData) {\n            const imageData = data.imageData;\n            const binaryData = atob(imageData);\n            const arrayBuffer = new ArrayBuffer(binaryData.length);\n            const uint8Array = new Uint8Array(arrayBuffer);\n            for (let i = 0; i < binaryData.length; i++) {\n              uint8Array[i] = binaryData.charCodeAt(i);\n            }\n            const blob = new Blob([uint8Array], {\n              type: 'image/png'\n            });\n            this.imageSrc = this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(blob));\n          }\n        });\n        this.status = \"logout\";\n      }\n    });\n    this.logSer.adminLogged.subscribe(admin => {\n      if (admin == true) {\n        this.adminLoggedIn = true;\n      }\n    });\n    this.logSer.search.subscribe(s => {\n      if (s == true) {\n        this.search = true;\n      } else {\n        this.search = false;\n      }\n    });\n    this.logSer.cartCount.subscribe(num => {\n      this.cartCount = num;\n    });\n    document.addEventListener(\"DOMContentLoaded\", function () {\n      window.addEventListener(\"scroll\", function () {\n        if (this.scrollY > 120) {\n          document.querySelector('#navbar')?.classList.add(\"sticky\");\n        } else {\n          document.querySelector('#navbar')?.classList.remove(\"sticky\");\n        }\n      });\n    });\n  }\n  clicked() {\n    if (this.status === \"logout\") {\n      localStorage.clear();\n      this._sanckBar.open('Logged out successfully.....', 'success', {\n        duration: 3000,\n        panelClass: ['mat-toolbar', 'mat-primary']\n      });\n      this.logSer.onFailure();\n      this.userName = '';\n      this.imageSrc = '';\n      this.isVisible = false;\n      this.adminLoggedIn = false;\n      this.router.navigateByUrl(\"/login\");\n      this.status = \"login\";\n    }\n  }\n  toCart() {\n    this.router.navigateByUrl(\"/cart\");\n  }\n  clickedList() {\n    if (!this.isVisible) {\n      this.isVisible = true;\n    } else {\n      this.isVisible = false;\n    }\n  }\n  navigate() {\n    if (this.adminLoggedIn) {\n      this.router.navigateByUrl(\"admin\");\n    } else {\n      this.router.navigateByUrl(\"\");\n    }\n  }\n  onSearchTextChanged(searchText) {\n    this.logSer.searchElement.emit(searchText);\n  }\n  hideUserList() {\n    this.isVisible = false;\n  }\n}","map":{"version":3,"mappings":"AAUA,SAMWA,QAAQ;EACfC,QAAQ,CAACC,cAAc,CAAC,OAAO,CAAC,CAACC,OAAO,GAAG,KAAK;AAClD;AAEF,OAAM,MAAOC,eAAe;EAS1BC,YAAoBC,WAAuB,EAASC,SAAsB,EAASC,MAAmB,EAASC,MAAa,EAASC,SAAqB,EAASC,MAAoB;IAAnK,gBAAW,GAAXL,WAAW;IAAqB,cAAS,GAATC,SAAS;IAAsB,WAAM,GAANC,MAAM;IAAsB,WAAM,GAANC,MAAM;IAAgB,cAAS,GAATC,SAAS;IAAqB,WAAM,GAANC,MAAM;IARzK,aAAQ,GAAS,EAAE;IAEnB,kBAAa,GAAC,KAAK;IACnB,aAAQ,GAAU,EAAE;IACpB,cAAS,GAAU,KAAK;IACxB,WAAM,GAAS,KAAK;IACpB,cAAS,GAAQ,CAAC;EAEuK;EACzLC,QAAQ;IACN,IAAI,CAACC,MAAM,GAAC,OAAO;IACnB,IAAI,CAACL,MAAM,CAACM,YAAY,CAACC,SAAS,CAAEC,KAAa,IAAG;MAClD,IAAGA,KAAK,IAAE,IAAI,EAAC;QACb,IAAI,CAACV,WAAW,CAACW,WAAW,EAAE,CAACF,SAAS,CAAEG,IAAQ,IAAG;UACnD,IAAI,CAACC,QAAQ,GAAGD,IAAI,CAACE,IAAI;QACzB,CAAC,CAAC;QACF,IAAI,CAACd,WAAW,CAACe,aAAa,EAAE,CAACN,SAAS,CAAEG,IAAQ,IAAG;UACrD,IAAGA,IAAI,IAAIA,IAAI,CAACI,SAAS,EAAC;YACxB,MAAMA,SAAS,GAAGJ,IAAI,CAACI,SAAS;YAChC,MAAMC,UAAU,GAAGC,IAAI,CAACF,SAAS,CAAC;YAClC,MAAMG,WAAW,GAAG,IAAIC,WAAW,CAACH,UAAU,CAACI,MAAM,CAAC;YACtD,MAAMC,UAAU,GAAG,IAAIC,UAAU,CAACJ,WAAW,CAAC;YAC9C,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,UAAU,CAACI,MAAM,EAAEG,CAAC,EAAE,EAAE;cAC1CF,UAAU,CAACE,CAAC,CAAC,GAAGP,UAAU,CAACQ,UAAU,CAACD,CAAC,CAAC;;YAE1C,MAAME,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACL,UAAU,CAAC,EAAE;cAAEM,IAAI,EAAE;YAAW,CAAE,CAAC;YAC1D,IAAI,CAACC,QAAQ,GAAG,IAAI,CAAC5B,SAAS,CAAC6B,sBAAsB,CAACC,GAAG,CAACC,eAAe,CAACN,IAAI,CAAC,CAAC;;QAEpF,CAAC,CAAC;QAEN,IAAI,CAACnB,MAAM,GAAC,QAAQ;;IAEtB,CAAC,CAAC;IAGF,IAAI,CAACL,MAAM,CAAC+B,WAAW,CAACxB,SAAS,CAAEyB,KAAa,IAAG;MACjD,IAAGA,KAAK,IAAE,IAAI,EAAC;QACf,IAAI,CAACC,aAAa,GAAC,IAAI;;IAEzB,CAAC,CAAC;IAEF,IAAI,CAACjC,MAAM,CAACkC,MAAM,CAAC3B,SAAS,CAAE4B,CAAS,IAAG;MACxC,IAAGA,CAAC,IAAE,IAAI,EAAC;QACT,IAAI,CAACD,MAAM,GAAC,IAAI;OACjB,MAAI;QACH,IAAI,CAACA,MAAM,GAAC,KAAK;;IAErB,CAAC,CAAC;IAEF,IAAI,CAAClC,MAAM,CAACoC,SAAS,CAAC7B,SAAS,CAAE8B,GAAG,IAAG;MACrC,IAAI,CAACD,SAAS,GAACC,GAAG;IACpB,CAAC,CAAC;IAEF5C,QAAQ,CAAC6C,gBAAgB,CAAC,kBAAkB,EAAC;MAC3CC,MAAM,CAACD,gBAAgB,CAAC,QAAQ,EAAC;QAC/B,IAAG,IAAI,CAACE,OAAO,GAAC,GAAG,EAAC;UAClB/C,QAAQ,CAACgD,aAAa,CAAC,SAAS,CAAC,EAAEC,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC;SAC3D,MACG;UACFlD,QAAQ,CAACgD,aAAa,CAAC,SAAS,CAAC,EAAEC,SAAS,CAACE,MAAM,CAAC,QAAQ,CAAC;;MAEjE,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAGAC,OAAO;IACL,IAAG,IAAI,CAACxC,MAAM,KAAG,QAAQ,EAAC;MACxByC,YAAY,CAACC,KAAK,EAAE;MACpB,IAAI,CAAC7C,SAAS,CAAC8C,IAAI,CAAC,8BAA8B,EAAE,SAAS,EAAE;QAC7DC,QAAQ,EAAE,IAAI;QACdC,UAAU,EAAE,CAAC,aAAa,EAAE,aAAa;OAC1C,CAAC;MACF,IAAI,CAAClD,MAAM,CAACmD,SAAS,EAAE;MACvB,IAAI,CAACxC,QAAQ,GAAC,EAAE;MAChB,IAAI,CAACgB,QAAQ,GAAC,EAAE;MAChB,IAAI,CAACyB,SAAS,GAAC,KAAK;MACpB,IAAI,CAACnB,aAAa,GAAC,KAAK;MACxB,IAAI,CAAChC,MAAM,CAACoD,aAAa,CAAC,QAAQ,CAAC;MACnC,IAAI,CAAChD,MAAM,GAAC,OAAO;;EAEvB;EACAiD,MAAM;IACJ,IAAI,CAACrD,MAAM,CAACoD,aAAa,CAAC,OAAO,CAAC;EACpC;EACAE,WAAW;IACT,IAAG,CAAC,IAAI,CAACH,SAAS,EAAC;MACjB,IAAI,CAACA,SAAS,GAAC,IAAI;KACpB,MACG;MACF,IAAI,CAACA,SAAS,GAAC,KAAK;;EAExB;EACAI,QAAQ;IACN,IAAG,IAAI,CAACvB,aAAa,EAAC;MACpB,IAAI,CAAChC,MAAM,CAACoD,aAAa,CAAC,OAAO,CAAC;KACnC,MAAI;MACH,IAAI,CAACpD,MAAM,CAACoD,aAAa,CAAC,EAAE,CAAC;;EAEjC;EACAI,mBAAmB,CAACC,UAAiB;IACnC,IAAI,CAAC1D,MAAM,CAAC2D,aAAa,CAACC,IAAI,CAACF,UAAU,CAAC;EAC5C;EACAG,YAAY;IACV,IAAI,CAACT,SAAS,GAAC,KAAK;EACtB","names":["hideMenu","document","getElementById","checked","HeaderComponent","constructor","userService","sanitizer","logSer","router","_sanckBar","foodie","ngOnInit","status","userLoggedIn","subscribe","email","getUserName","data","userName","name","getProfileImg","imageData","binaryData","atob","arrayBuffer","ArrayBuffer","length","uint8Array","Uint8Array","i","charCodeAt","blob","Blob","type","imageSrc","bypassSecurityTrustUrl","URL","createObjectURL","adminLogged","admin","adminLoggedIn","search","s","cartCount","num","addEventListener","window","scrollY","querySelector","classList","add","remove","clicked","localStorage","clear","open","duration","panelClass","onFailure","isVisible","navigateByUrl","toCart","clickedList","navigate","onSearchTextChanged","searchText","searchElement","emit","hideUserList"],"sourceRoot":"","sources":["F:\\CAPSTONE PROJECT- FOODIE APP\\FoodieApplicationFE\\FoodieApplication\\src\\app\\header\\header.component.ts"],"sourcesContent":["import { Component, EventEmitter, OnInit, Sanitizer } from '@angular/core';\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\nimport { UserService } from '../service/user.service';\nimport { LoginService } from '../service/login.service';\nimport { Router } from '@angular/router';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { FoodieService } from '../service/foodie.service';\nimport { Item } from '../model/item';\nimport {MatBadgeModule} from '@angular/material/badge';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})\n<script>\n  function hideMenu() {\n    document.getElementById(\"check\").checked = false;\n  }\n\nexport class HeaderComponent implements OnInit {\n  imageSrc:SafeUrl='';\n  status!:String;\n  adminLoggedIn=false;\n  userName:String = \"\";\n  isVisible:boolean =false;\n  search:boolean=false;\n  cartCount:number=0;\n\n  constructor(private userService:UserService,private sanitizer:DomSanitizer,private logSer:LoginService,private router:Router,private _sanckBar:MatSnackBar,private foodie:FoodieService){}\n  ngOnInit(): void {\n    this.status=\"login\";\n    this.logSer.userLoggedIn.subscribe((email:boolean)=>{      \n      if(email==true){\n        this.userService.getUserName().subscribe((data:any)=>{\n          this.userName = data.name;\n          });\n          this.userService.getProfileImg().subscribe((data:any)=>{\n            if(data && data.imageData){\n              const imageData = data.imageData;\n              const binaryData = atob(imageData);\n              const arrayBuffer = new ArrayBuffer(binaryData.length);\n              const uint8Array = new Uint8Array(arrayBuffer);\n              for (let i = 0; i < binaryData.length; i++) {\n                uint8Array[i] = binaryData.charCodeAt(i);\n              }\n              const blob = new Blob([uint8Array], { type: 'image/png' });\n              this.imageSrc = this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(blob));\n            }\n          });\n          \n      this.status=\"logout\";\n      }\n    });\n\n\n    this.logSer.adminLogged.subscribe((admin:boolean)=>{      \n      if(admin==true){\n      this.adminLoggedIn=true;\n      }\n    });\n\n    this.logSer.search.subscribe((s:boolean)=>{\n      if(s==true){\n        this.search=true;\n      }else{\n        this.search=false;\n      }\n    })\n\n    this.logSer.cartCount.subscribe((num)=>{\n      this.cartCount=num;\n    })\n\n    document.addEventListener(\"DOMContentLoaded\",function(){\n      window.addEventListener(\"scroll\",function(){\n        if(this.scrollY>120){\n          document.querySelector('#navbar')?.classList.add(\"sticky\");\n        }\n        else{\n          document.querySelector('#navbar')?.classList.remove(\"sticky\");\n        }\n      });\n    });\n  } \n\n\n  clicked(){\n    if(this.status===\"logout\"){\n      localStorage.clear();\n      this._sanckBar.open('Logged out successfully.....', 'success', {\n        duration: 3000,\n        panelClass: ['mat-toolbar', 'mat-primary']\n      });\n      this.logSer.onFailure();\n      this.userName='';\n      this.imageSrc='';\n      this.isVisible=false;\n      this.adminLoggedIn=false;\n      this.router.navigateByUrl(\"/login\");\n      this.status=\"login\";\n        }\n  }\n  toCart(){\n    this.router.navigateByUrl(\"/cart\");\n  }\n  clickedList(){\n    if(!this.isVisible){\n      this.isVisible=true;\n    }\n    else{\n      this.isVisible=false;\n    }\n  }\n  navigate(){\n    if(this.adminLoggedIn){\n      this.router.navigateByUrl(\"admin\");\n    }else{\n      this.router.navigateByUrl(\"\");\n    }\n  }\n  onSearchTextChanged(searchText:string){\n    this.logSer.searchElement.emit(searchText);\n  }\n  hideUserList(){\n    this.isVisible=false;\n  }\n  \n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}